<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <title>PATHS & LINES</title>
  <style>
    canvas {
      display: block;
    }
  </style>
</head>

<body>
  <input type="button" value="EXERCISE 1" onclick="ex1()" />
  <input type="button" value="EXERCISE 2" onclick="ex2()" />
  <input type="button" value="EXERCISE 3" onclick="ex3()" />
  <input type="button" value="EXERCISE 4" onclick="ex4()" />
  <canvas id="myCanvas" width="500" height="200" style="border:solid 3px orange">
    Your browser does not support HTML5 Canvas.
  </canvas>

  <script>
  const canvas = document.querySelector("#myCanvas");
  const ctx = canvas.getContext("2d");

  const W = canvas.width, H = canvas.height;
  let animationRunning = false;

  // ---------- EX1 ----------
  function ex1() {
    stopAnimation(); // <-- para animação
    ctx.clearRect(0, 0, canvas.width, canvas.height);

    ctx.beginPath();
    ctx.moveTo(50, 50);
    ctx.lineTo(200, 50);
    ctx.lineTo(200, 120);
    ctx.lineTo(50, 120);
    ctx.closePath();
    ctx.fillStyle = "blue";
    ctx.fill();

    ctx.beginPath();
    ctx.moveTo(100, 80);
    ctx.lineTo(280, 80);
    ctx.lineTo(280, 160);
    ctx.lineTo(100, 160);
    ctx.closePath();
    ctx.strokeStyle = "lime";
    ctx.stroke();
  }

  // ---------- EX2 ----------
  function ex2() {
    stopAnimation();
    ctx.clearRect(0, 0, canvas.width, canvas.height);

    ctx.beginPath();
    ctx.moveTo(50, 150);
    ctx.lineTo(50, 50);
    ctx.lineTo(120, 150);
    ctx.lineTo(120, 50);
    ctx.lineTo(190, 150);
    ctx.lineTo(190, 50);
    ctx.lineTo(260, 150);
    ctx.lineTo(260, 50);

    ctx.strokeStyle = "red";
    ctx.lineWidth = 2;
    ctx.stroke();
  }

  // ---------- EX3 ----------
  function ex3() {
    stopAnimation();
    ctx.clearRect(0, 0, canvas.width, canvas.height);

    ctx.lineWidth = 5;
    ctx.strokeStyle = "black";

    ctx.beginPath();
    ctx.rect(80, 80, 100, 100);
    ctx.stroke();

    ctx.beginPath();
    ctx.moveTo(70, 80);
    ctx.lineTo(130, 20);
    ctx.lineTo(190, 80);
    ctx.closePath();
    ctx.stroke();
  }

  // ---------- EX4 ----------
  function ex4() {
    ctx.clearRect(0, 0, W, H);
    animationRunning = true;
    render();
  }

  function render() {
    if (!animationRunning) return;

    let cx = W / 2;
    let cy = H / 2;
    let x = Math.random() * W;
    let y = Math.random() * H;

    ctx.beginPath();
    ctx.moveTo(cx, cy);
    ctx.lineTo(x, y);
    ctx.strokeStyle = getRandomColor();
    ctx.stroke();

    requestAnimationFrame(render);
  }

  // ---------- STOP ----------
  function stopAnimation() {
    animationRunning = false;
  }

  function getRandomColor() {
    let r = Math.floor(Math.random() * 256);
    let g = Math.floor(Math.random() * 256);
    let b = Math.floor(Math.random() * 256);
    return `rgb(${r},${g},${b})`;
  }
</script>

</body>

</html>
